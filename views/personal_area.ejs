<link rel="stylesheet" type="text/css" href="stylesheets/style.css?a=1" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="javascripts/updateUser.js"></script>

<script>
    $('#personalFormid').ready(function () {
        (async function () {
            let response = await fetchData('users/personal_area/data');
            let user = await response.json();
            $('#inputUsername').val(user.username);
        })();

        $("#save").click(function () {
            let userName = $('#inputUsername').val();
            let pass = $('#inputPassword').val();
            let passConfirm = $('#inputPasswordConfirm').val();

            if (pass == passConfirm)
                return updateUser(userName, { password: pass });

            $('#inputPasswordConfirm').addClass(' is-invalid');
        });
    });
</script>

<div class="container-xl px-1 mt-5">
    <hr class="mt-0 mb-5">
    <div class="row">
        <div class="col-xl-4 flex justify-items-center">
            <div class="card mb-4 mb-xl-0 align-items-center  custom-border">
                <div class="card-body text-center">
                    <i class="fa fa-user-o fa-5x mb-2 pt-5">
                    </i>
                </div>
                <h3 class="font-weight-bold pb-5"> UPDATE YOUR INFO</h3>
            </div>
        </div>
        <div class="col-xl-8">
            <div class="card mb-4">
                <div class="card-header">Account Details</div>
                <div class="card-body">
                    <form id="personalFormid" class="form-floating">
                        <div class="mb-3">
                            <label class="small mb-1" for="inputUsername">Username</label>
                            <input class="form-control" id="inputUsername" type="text" placeholder="Enter your username"
                                value="username">
                        </div>
                        <div class="mb-3">
                            <label class="small mb-1" for="inputPassword">Password</label>
                            <input class="form-control" id="inputPassword" type="password" placeholder="New password"
                                autocomplete="new-password">
                        </div>
                        <div class="mb-3">
                            <label class="small mb-1">Repeat password</label>
                            <input type="password" class="form-control" id="inputPasswordConfirm"
                                placeholder="Repeat new password">
                        </div>
                        <div>
                            <button id="save" class="btn custom-btn" type="button">Save changes</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <hr class="mb-5 mt-4">
</div>